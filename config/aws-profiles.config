# AWS CLI Profile Configuration for Multi-Account Access
# Add these to your ~/.aws/config file AFTER Organizations is created

# Instructions:
# 1. Run `terragrunt apply` in accounts/management/organizations/ first
# 2. Note the account IDs from the output
# 3. Replace SHARED_SERVICES_ACCOUNT_ID and WORKLOAD_ACCOUNT_ID below
# 4. Append this content to ~/.aws/config

#------------------------------------------------------------------------------
# Management Account (your main account)
#------------------------------------------------------------------------------
[profile management]
region = us-east-1
output = json
# Uses default credentials or SSO

#------------------------------------------------------------------------------
# Shared Services Account
# Assumes role from management account
#------------------------------------------------------------------------------
[profile shared-services]
role_arn = arn:aws:iam::SHARED_SERVICES_ACCOUNT_ID:role/OrganizationAccountAccessRole
source_profile = management
region = us-east-1
output = json

#------------------------------------------------------------------------------
# Workload Account
# Assumes role from management account
#------------------------------------------------------------------------------
[profile workload]
role_arn = arn:aws:iam::WORKLOAD_ACCOUNT_ID:role/OrganizationAccountAccessRole
source_profile = management
region = us-east-1
output = json

#------------------------------------------------------------------------------
# Usage Examples
#------------------------------------------------------------------------------
# List S3 buckets in each account:
#   aws s3 ls --profile management
#   aws s3 ls --profile shared-services
#   aws s3 ls --profile workload
#
# Verify which account you're in:
#   aws sts get-caller-identity --profile shared-services
#
# Terragrunt with specific profile:
#   AWS_PROFILE=shared-services terragrunt apply
